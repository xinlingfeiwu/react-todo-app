# ğŸ—ï¸ æ„å»ºé…ç½®è¯´æ˜

## ğŸ“¦ æ„å»ºè„šæœ¬å¯¹æ¯”

| è„šæœ¬ | ç”¨é€” | ç¯å¢ƒå˜é‡ | ä¼˜åŒ–ç¨‹åº¦ | ä½¿ç”¨åœºæ™¯ |
| -------------------- | -------- | --------------------- | -------- | -------------- |
| `npm run build`      | å¼€å‘æ„å»º | é»˜è®¤                  | æ™®é€š     | æœ¬åœ°æµ‹è¯•ã€é¢„è§ˆ |
| `npm run build:prod` | ç”Ÿäº§æ„å»º | `NODE_ENV=production` | é«˜åº¦ä¼˜åŒ– | æ­£å¼å‘å¸ƒã€éƒ¨ç½² |

## ğŸ¯ ç‰ˆæœ¬å‘å¸ƒæ„å»ºç­–ç•¥

### ç”Ÿäº§å‘å¸ƒ (æ¨è)

```bash

npm run release:patch   # ä½¿ç”¨ build:prod
npm run release:minor   # ä½¿ç”¨ build:prod
npm run release:major   # ä½¿ç”¨ build:prod

```

### å¿«é€Ÿæµ‹è¯•å‘å¸ƒ

```bash

# å¦‚æœåªæ˜¯æƒ³å¿«é€Ÿæµ‹è¯•å‘å¸ƒæµç¨‹ï¼Œå¯ä»¥ä¸´æ—¶ä½¿ç”¨

npm version patch --no-git-tag-version && npm run build

```

## ğŸ”§ build:prod çš„ä¼˜åŒ–ç‰¹æ€§

1. **ä»£ç å‹ç¼©**
   * JavaScript/CSS æ–‡ä»¶å‹ç¼©
   * ç§»é™¤æ³¨é‡Šå’Œç©ºç™½å­—ç¬¦
   * å˜é‡åæ··æ·†
2. **ç¯å¢ƒä¼˜åŒ–**
   * `NODE_ENV=production` è®¾ç½®
   * ç§»é™¤å¼€å‘ç¯å¢ƒè°ƒè¯•ä»£ç 
   * å¯ç”¨ç”Ÿäº§æ¨¡å¼ä¼˜åŒ–
3. **èµ„æºä¼˜åŒ–**
   * Tree Shaking ç§»é™¤æœªä½¿ç”¨ä»£ç 
   * é™æ€èµ„æºå‹ç¼©
   * ä»£ç åˆ†å‰²ä¼˜åŒ–
4. **æ€§èƒ½æå‡**
   * æ›´å°çš„åŒ…ä½“ç§¯
   * æ›´å¿«çš„åŠ è½½é€Ÿåº¦
   * æ›´å¥½çš„è¿è¡Œæ€§èƒ½

## ğŸ“Š æ„å»ºäº§ç‰©å¯¹æ¯”

ä½¿ç”¨ `npm run analyze` å¯ä»¥åˆ†ææ„å»ºäº§ç‰©ï¼š

```bash

# åˆ†ææ„å»ºåŒ…å¤§å°

npm run analyze

# é¢„è§ˆæ„å»ºç»“æœ

npm run preview

```

## ğŸš€ CI/CD æ„å»ºé…ç½®

GitHub Actions è‡ªåŠ¨ä½¿ç”¨ç”Ÿäº§æ„å»ºï¼š

```yaml

- name: ğŸ—ï¸ Build

  run: npm run build:prod  # ç¡®ä¿ç”Ÿäº§ä¼˜åŒ–

```

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

å¦‚æœéœ€è¦åŒºåˆ†ä¸åŒç¯å¢ƒçš„é…ç½®ï¼Œå¯ä»¥åˆ›å»ºï¼š

```bash

# .env.production

VITE_APP_ENV=production
VITE_API_URL=https://api.example.com
VITE_APP_VERSION=$npm_package_version

# .env.development

VITE_APP_ENV=development
VITE_API_URL=http://localhost:3000
VITE_APP_VERSION=dev

```

## ğŸ” æ„å»ºéªŒè¯

å‘å¸ƒå‰å¯ä»¥æ‰‹åŠ¨éªŒè¯æ„å»ºï¼š

```bash

# 1. ç”Ÿäº§æ„å»º

npm run build:prod

# 2. æœ¬åœ°é¢„è§ˆ

npm run preview

# 3. æ£€æŸ¥æ„å»ºäº§ç‰©

ls -la dist/

```

## ğŸ“ˆ æœ€ä½³å®è·µ

1. **æ­£å¼å‘å¸ƒ**: å§‹ç»ˆä½¿ç”¨ `build:prod`
2. **æœ¬åœ°æµ‹è¯•**: ä½¿ç”¨ `build` å³å¯
3. **CI/CD**: ç»Ÿä¸€ä½¿ç”¨ `build:prod`
4. **æ€§èƒ½ç›‘æ§**: å®šæœŸæ£€æŸ¥æ„å»ºäº§ç‰©å¤§å°
5. **ç¯å¢ƒéš”ç¦»**: æ˜ç¡®åŒºåˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ
